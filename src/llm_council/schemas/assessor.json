{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AssessorOutput",
  "description": "Output schema for the Assessor subagent that makes build/no-build and go/no-go decisions",
  "type": "object",
  "required": ["decision", "confidence", "criteria_evaluation", "recommendation", "reasoning"],
  "properties": {
    "decision": {
      "type": "string",
      "enum": ["proceed", "proceed_with_conditions", "defer", "reject"],
      "description": "The primary decision outcome"
    },
    "confidence": {
      "type": "number",
      "minimum": 0,
      "maximum": 100,
      "description": "Confidence in this decision (0-100%)"
    },
    "decision_context": {
      "type": "object",
      "properties": {
        "question": {
          "type": "string",
          "description": "The decision question being answered"
        },
        "decision_type": {
          "type": "string",
          "enum": ["build_or_buy", "go_no_go", "prioritization", "resource_allocation", "technical_choice", "risk_acceptance"],
          "description": "Category of decision"
        },
        "stakeholders": {
          "type": "array",
          "items": {"type": "string"},
          "description": "Who is affected by this decision"
        }
      }
    },
    "criteria_evaluation": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["criterion", "weight", "score", "rationale"],
        "properties": {
          "criterion": {
            "type": "string",
            "description": "The evaluation criterion"
          },
          "weight": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "Importance weight (0-1, should sum to 1)"
          },
          "score": {
            "type": "number",
            "minimum": 0,
            "maximum": 10,
            "description": "Score for this criterion (0-10)"
          },
          "rationale": {
            "type": "string",
            "description": "Why this score was given"
          }
        }
      }
    },
    "weighted_score": {
      "type": "number",
      "minimum": 0,
      "maximum": 10,
      "description": "Overall weighted score across all criteria"
    },
    "pros": {
      "type": "array",
      "items": {"type": "string"},
      "description": "Arguments in favor"
    },
    "cons": {
      "type": "array",
      "items": {"type": "string"},
      "description": "Arguments against"
    },
    "risks": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["risk", "impact", "likelihood"],
        "properties": {
          "risk": {"type": "string"},
          "impact": {
            "type": "string",
            "enum": ["low", "medium", "high", "critical"]
          },
          "likelihood": {
            "type": "string",
            "enum": ["unlikely", "possible", "likely", "certain"]
          },
          "mitigation": {"type": "string"}
        }
      }
    },
    "conditions": {
      "type": "array",
      "items": {"type": "string"},
      "description": "Conditions that must be met for proceed_with_conditions decision"
    },
    "alternatives_considered": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "alternative": {"type": "string"},
          "reason_rejected": {"type": "string"}
        }
      }
    },
    "resource_requirements": {
      "type": "object",
      "properties": {
        "effort_level": {
          "type": "string",
          "enum": ["trivial", "small", "medium", "large", "xlarge"],
          "description": "Relative effort required"
        },
        "skills_needed": {
          "type": "array",
          "items": {"type": "string"}
        },
        "dependencies": {
          "type": "array",
          "items": {"type": "string"}
        }
      }
    },
    "recommendation": {
      "type": "string",
      "minLength": 20,
      "description": "Clear actionable recommendation"
    },
    "next_steps": {
      "type": "array",
      "items": {"type": "string"},
      "description": "Immediate actions if decision is approved"
    },
    "reversibility": {
      "type": "string",
      "enum": ["easily_reversible", "reversible_with_effort", "partially_reversible", "irreversible"],
      "description": "How easy is it to undo this decision"
    },
    "reasoning": {
      "type": "string",
      "minLength": 50,
      "description": "Detailed explanation of the decision-making process"
    }
  },
  "additionalProperties": false
}
